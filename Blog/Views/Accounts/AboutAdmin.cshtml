@model Blog.Models.Administrator

@{
    ViewBag.Title = "Swilam";
}

<script src="~/Scripts/jquery-1.8.2.min.js"></script>
<script src="~/Scripts/jquery.unobtrusive-ajax.js"></script>

<div class="about-section">
    <div class="inner-width">
        <h1></h1>
        <div class="about-section-row">
            <div class="about-section-col">
                <div class="image">
                    <img id="portrait" src="@Url.Content(Model.PicUrl)" alt="Portrait" />
                </div>
                @if (Session["IsAdmin"] != null && (bool)Session["IsAdmin"] == true)
                {
                    <div class="edit-admin about" style="float:right">
                        <a  id="myBtn">Edit</a>
                    </div>
                    <div id="myModal" class="modal">

                        <!-- Modal content -->
                        <div class="modal-content">
                            <span class="close">&times;</span>

                                <form class="pure-form pure-form-aligned" id="editForm">
                                    <fieldset>
                                        <input type="hidden" name="id" value="@Model.Id" />
                                        <div class="pure-control-group">
                                            <label for="name">Name</label>
                                            <input id="name" name="name" type="text" value="@Model.Name" required placeholder="Name.">
                                        </div>

                                        <div class="pure-control-group">
                                            <label for="email">Email Address</label>
                                            <input id="email" name="email" type="email" value="@Model.Email" required placeholder="Email Address.">
                                        </div>

                                        <div class="pure-control-group">
                                            <label for="education">Education</label>
                                            <input id="education" name="education" type="text" value="@Model.Education" placeholder="Education.">
                                        </div>

                                        <div class="pure-control-group">
                                            <label for="birthdate">Birthdate</label>
                                            <input id="birthdate" name="birthdate" value="@Model.Birthdate" type="date">
                                        </div>

                                        <div class="pure-control-group">
                                            <label for="biography">Biography</label>
                                            <textarea id="bio" name="bio" type="text" placeholder="Bio.">@Model.Bio</textarea>
                                        </div>

                                        <div class="pure-control-group">
                                            <label for="Country">Location</label>
                                            @Html.DropDownListFor(x => x.Country, new SelectList(ViewBag.countries), new { @class = "pure-input-1-2" })
                                        </div>

                                        <div class="pure-control-group">
                                            <div id="errorDiv" class="alert" style="display:none"></div>
                                        </div>

                                        <div class="pure-controls">
                                            <button type="button" id="save" data-href="@Href("~/accounts/edit")" class="pure-button pure-button-primary">
                                                <i class="fa fa-save"></i> Save
                                            </button>
                                        </div>
                                    </fieldset>
                                </form>
                            </div>
                    </div>
                }
            </div>
            <div class="about-section-col">
                <div class="info">
                    <label class="about-label"><i class="fa fa-user-circle-o" aria-hidden="true"></i> @Model.Name </label>
                    <label class="about-label"><i class="fa fa-university" aria-hidden="true"></i> @Model.Education </label>
                    <label class="about-label"><i class="fa fa-calendar" aria-hidden="true"></i> Born on @Model.Birthdate.Value.Date.ToShortDateString() </label>
                    <label class="about-label"><i class="fa fa-map-marker fa-lg" aria-hidden="true"></i>  @Model.Country </label>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="inner-width">
    <div class="about-section-row">
        <div class="about">
            <h1 class="about-label" style="padding-left:10px;"><i class="fa fa-info-circle" aria-hidden="true"></i> Bio</h1>
            <p class="about-label p1" style="padding-top:2em;">@Model.Bio</p>
        </div>

        <div class="about-section">
            <div class="about-section-row">
                @* auto for adding more skills." *@
                <div class="about-section-col" style="height:auto">
                    <div class=" about" style="padding:10px;">
                        <h1 class="about-label"><i class="fa fa-cogs" aria-hidden="true"></i> Skills</h1>
                        <ul class="skillsList" style="position:static; padding-top:20px;">
                            <li>ASP.NET MVC.</li>
                            <li>jQuery.</li>
                            <li>Javascript.</li>
                            <li>C#.</li>
                            <li>AJAX.</li>
                            <li>LINQ.</li>
                            <li>Entity Framework.</li>
                            <li>ADO.NET.</li>
                            <li>HTML.</li>
                            <li>CSS.</li>
                        </ul>
                    </div>
                </div>
                <div class="about-section-col">
                    <h1 class="about-label" style="padding:10px;"><i class="fa fa-address-book-o" aria-hidden="true"></i> Contact</h1>
                    <div class="about-section">
                        <div class="about" style="display:grid; width:300px; float:right">
                            <a href="https://twitter.com/muswilam">
                                <i class="fa fa-twitter" aria-hidden="true"></i> Twitter
                            </a>
                            <a href="https://github.com/muswilam">
                                <i class="fa fa-github" aria-hidden="true"></i> GitHub
                            </a>
                            <a href="https://www.linkedin.com/in/muhammad-swilam-a479a1b0/">
                                <i class="fa fa-linkedin-square" aria-hidden="true"></i> LinkedIn
                            </a>
                            <a href="MailTo://@Model.Email">
                                <i class="fa fa-envelope" aria-hidden="true"></i> @Model.Email
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Get the modal
    var modal = document.getElementById("myModal");

    // Get the button that opens the modal
    var btn = document.getElementById("myBtn");

    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];

    // When the user clicks on the button, open the modal
    btn.onclick = function () {
        modal.style.display = "block";
    }

    // When the user clicks on <span> (x), close the modal
    span.onclick = function () {
        modal.style.display = "none";
    }

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function (event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }
</script>

<script>
    $(document).ready(function () {
        $("#save").click(function () {
            var linkUrl = $(this).attr("data-href");
            $.ajax({
                url: linkUrl,
                type: 'Post',
                data: $("#editForm").serialize()
            })
            .done(function (result) {
                if (result.success) {
                    location.reload();
                } else {
                    $("#errorDiv").show();
                    $("#errorDiv").html(result.message);
                }
            });
        });
    });
</script>